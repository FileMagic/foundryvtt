<!-- Overview
- Point out issues are usually client side
Before You Begin
- Things troubleshooting can't resolve
-- Poor Hardware
-- Poor host internet
I have A Low Framerate and Choppy Animation
- Blurb covering frequent and simple causes
-- Collapsible - Check Settings
-- Collapsible - Hardware Acceleration, check and either instructions laid out or a link to the gray/black screen article
-- Collapsible -  Too Many Walls or Lights

Foundry VTT Responds Slowly
- Blurb covering frequent and simple causes
-- Collapsible: Slow Internet, instructions on how to check player and host speeds
-h3 Modules 
-- Blurb about modules adding extra latency
--- Collapsible with instructions on disabling modules, then enabling half at a time to rule out possibilities

I Still Have Poor Performance
- Instructions to use Contact Us and Discord server invitation for more involved troubleshooting -->
<!-- Overview -->
<h2 class="border">Overview</h2>
<p>This article explains common reasons for poor performance in Foundry VTT, such as a low framerate or delayed actions, and steps to resolve them. These include client side settings, browser settings, and even network and module issues.</p>

<!-- Before you Begin -->
<h2 class="border">Before You Begin</h2>
<p>Before you proceed with troubleshooting, it's best to determine if your performance issues relate to your hardware or network issues.</p>
<h3>Hardware Related</h3>
<ul>
    <li>Low FPS</li>
    <li>Choppy animations</li>
    <li>Serious graphics delays</li>
</ul>
<p>These may be accompanied by a warning about WebGL or Hardware Acceleration.</p>

<h3>Network Related</h3>
<ul>
    <li>Delayed responses from Foundry VTT - Eg rolls take several seconds to happen</li>
    <li>Foundry VTT times out or requires you to refresh often</li>
    <li>Long load times</li>
</ul>

<p>If your issues match or are similar to the first category, proceed to "I Have A Low Framerate or Choppy Animation." Otherwise, proceed to "Foundry VTT Responds or Loads Slowly."</p>

<h2 class="border">I Have A Low Framerate or Choppy Animation</h2>
<p>When you log onto Foundry VTT, the host computer, whether self-hosted or cloud-hosted, only sends data to clients. Each player's computer renders all graphics itself based on each player's settings. Changing settings to accommodate your hardware, ensuring that hardware acceleration is enabled, and using less walls and lights on Scenes can all help improve performance.</p> 

<section class="collapsible">
    <header class="collapsible-header">Change Settings for Better Performance</header>
        <div class="collapsible-content">  
            <p>There are several settings in the Core Settings window that, if set incorrectly, can cause poor performance on lower end computers.</p>
            <ul>
                <li>Performance Mode - If your Performance Mode is set to High or Maximum, change it to Low or Medium.</li>
                <li>Maximum Framerate - Set this to 30 FPS to improve performance on low end computers. Set it higher to raise your framerate on higher end computers.</li>
                <li>Token Drag Vision - Disable this if you experience poor performance when moving your Token.</li>
                <li>Light Source Animation - Disable this if you experience poor performance in scenes with animated Lights.</li>
            </ul> 
        </div>
</section>

<section class="collapsible">
    <header class="collapsible-header">Too Many Lights, Walls, or Animations</header>
    <div class="collapsible-content">
        <p>Too many lights, walls, or animations on a scene can severely hinder performance. If performance improves on an empty scene or one with less lights, walls, or animations, then this is likely the cause of the performance issues. @Article[content-creation-guide] has instructions on laying walls and lights with better performance in mind.<!-- TODO: Reword? Add suggestions?--> </p>
    </div>
</section>

<h3>Hardware Acceleration Is Disabled</h3>
<p>Hardware acceleration allows Foundry VTT to use the appropriate hardware on your computer to draw Scenes, calculate vision, and do everything else graphics related. If disabled, this will lead to serious performance issues. The steps to enable hardware acceleration are outlined below, including special steps to take on Windows.</p>

<section class="collapsible">
    <header class="collapsible-header">Chrome Hardware Acceleration</header>
        <div class="collapsible-content">  
        <ol>   
            <li>Open Chrome and enter <code>chrome://settings</code> in the location bar at the top of the screen.</li>
            <li>Click on <strong>System</strong> on the menu on the left.</li>
            <li>Enable <strong>Use hardware acceleration when available</strong>.</li>
            <li>Enter <code>chrome://flags</code> in the location bar.</li>
            <li>Enable <strong>Override software rendering list</strong>.</li>
            <li>Close out of all Chrome windows and relaunch Chrome.</li>
        </ol>
        </div>
<section class="collapsible">
    <header class="collapsible-header">Firefox Hardware Acceleration</header>
        <div class="collapsible-content"> 
        <ol>
            <li>Open Firefox and enter <code>about:config</code>. If a warning page shows, click <strong>Accept the Risk and Continue</strong>. Enabling Hardware Acceleration for Foundry VTT will not compromise your security.</li>
            <li>Search for <code>layers.acceleration.force-enabled</code> in the top search bar</li>
            <li>Click the two arrows on the right hand side. The bottom of the search results should say <strong>True</strong></li>
            <li>Close out of all Firefox windows and relaunch Firefox.</li>
        </ol>
        </div>
 <section class="collapsible">
    <header class="collapsible-header">Enable Hardware Acceleration in the standalone Foundry VTT Application</header>
        <div class="collapsible-content">  
        <ul>
            <li>MacOS: Open a terminal and enter <code>open -a FoundryVTT --args ignore-gpu-blocklist</code> </li>
            <li>Linux: Open a terminal in your Foundry VTT installation directory and enter <code>./foundryvtt --ignore-gpu-blocklist</code></li>
         </ul> 
            
        <p>Enabling Hardware Acceleration in Windows requires several steps. They are detailed below</p>
        <ol>
                <li>Navigate to to your Foundry VTT installation folder.</li>
                <li>Right click on 'foundryvtt.exe', and click 'Create Shortcut.'</li>
                <li>click the shortcut and select 'Properties.'</li>
                <li>In the 'Target' field, add a space and enter <code>--ignore-gpu-blocklist</code>. The field should look similar to <code>"C:\...\FoundryVTT.exe" --ignore-gpu-blocklist</code>, where "..." is the path to your Foundry VTT installation folder. Note that the addition is outside of the quotes. </li>
                <li>Press 'OK', and then use this shortcut to launch Foundry VTT from now on.</li>
        </ol>
        </div>
 <section class="collapsible">
    <header class="collapsible-header">Prevent Windows from Overriding Hardware Acceleration Settings</header>
        <div class="collapsible-content">  
        <p>If Foundry VTT still warns that Hardware Acceleration is disabled, Windows may be overriding your browser's settings. This usually happens on notebook PCs with a dedicated GPU. The following steps explain how to check for and correct this.</p>
            <ol>
                <li>Press your Windows key, type "Settings", and press 'Enter.'</li>
                <li>Click on 'Display' on the lefthand side, then scroll down and click on 'Graphics Settings.'</li>
                <li>Select "Classic App" from the drop down menu.</li>
                <li>Click 'Browse', then find and select your browser or Foundry Virtual Tabletop executable</li>
                <li>Click the 'Options' button and select the appropriate GPU. Typically this is the "High Performance" option.</li>
                <li>Click 'Save.'</li>
            </ol> 
    </div>
    </section>
<h2 class="border">Foundry VTT Responds or Loads Slowly</h2>
<p>Slow response times are typically caused by network or module issues. If it takes a long time to load the World when a player logs onto Foundry VTT, excess sidebar data and asset sizes are the most common culprit.</p>
<section class="collapsible">
    <header class="collapsible-header">Slow Host Internet</header>
        <div class="collapsible-content">  
            <p>Foundry VTT requires the hosting computer to have at least 12 Mbps upload speed, and players at least 6 Mbps download speed. You can verify your upload or download speeds using a speedtest website such as <a href="https://speedtest.net" target="_blank" rel="nofollow noopener">Speedtest.net</a>. If your upload speed is less than 12 Mbps, self-hosting Foundry VTT will prove difficult. @Article[hosting] lists both free and paid alternatives to self-hosting that may be available to you.</p>
        </div>
</section>
<h3>Module Related Issues</h3>
<p>While modules are a popular feature of Foundry VTT, module conflicts or using too many may cause performance issues. The easiest way to determine if modules are the culrpit is to disable them all by launching your world in safe configuration. For instructions on how to do this, see @Article[launch-safe-configuration]. If Foundry VTT begins working normally, it's most likely a module causing issues.</p>
<section class="collapsible">
    <header class="collapsible-header">Narrow Down the Module at Fault</header>
    <div class="collapsible-content">
        <p>Finding the module at fault for your performance issues may seem like a daunting task if you have dozens or hundreds of modules. Fortunately there's a quick method to narrow down the offending module compared to enabling and disabling one by one. You will divide your modules into two groups, and then further divide these groups in half depending on if the issue returns or not.</p>
       <ul>
        <li>Enable half of your modules.</li>
        <li>If the performance issue returns: the module at fault is in this group. Enable half of this group, and check again.</li> 
        <li>If the performance issue does not return: the module at fault is in the other group of modules. Enable that group and check again.</li>
       </ul> 
       <p>Repeat this process until only one module remains. This will be the module at fault.</p>
    </div>
</section>

<h3>Too Many Actors, Scenes, Etc</h3>
<p>Scenes, Actors, Items, etc, are all sent to each device that logs into the World. If your world contains hundreds or thousands of these, it will cause significant delays on load. We suggest keeping whatever is not needed for your current session in Compendiums. For more information on Compendiums and how to use them, see @Article[compendium].</p>

<h3>Large File Sizes</h3>
<p>Images such as the Scene background, foreground, and tiles, are all sent to each player when a Scene is activated. Large image file sizes sizes greatly increase the amount of data that must be sent and thus increase loading itmes. If possible, use compressed image formats like WebP or WebM for Scene and Tile images.</p>

<h2 class="border">I Still Have Performance Issues</h2>
<p>If your issues continue to occur after going through the above steps then we may need to provide direct assistance. Please <a href="/contact-us/" target="_blank" rel="nofollow noopener">contact us</a> or join our <a href="https://discord.gg/foundryvtt" target="_blank" rel="nofollow noopener">Discord community</a> for live support.</p>